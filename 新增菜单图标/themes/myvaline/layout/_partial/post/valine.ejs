<div id="vcomment" class="comment"></div> 
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js"></script>

<script>
  var notify = '<%= theme.valine.notify %>' == true ? true : false;
  var verify = '<%= theme.valine.verify %>' == true ? true : false;
  var GUEST_INFO = ['nick','mail','link'];
  var guest_info = '<%= theme.valine.guest_info %>'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
    window.onload = function() {
        new Valine({
            el: '.comment',
            notify: notify,
            verify: verify,

            app_id: "<%= theme.valine.appid %>",
            app_key: "<%= theme.valine.appkey %>",
            placeholder: "<%= theme.valine.placeholder %>",
            guest_info: guest_info.length == 0 ? GUEST_INFO: guest_info,
            avatar:"<%= theme.valine.avatar %>",
            avatar_cdn:"<%= theme.valine.avatar_cdn %>",
            pageSize: "<%= theme.valine.pageSize %>"
        });
    }
</script>

